<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uniswap PairCreated Event Listener</title>
</head>
<body>
    <h1>Uniswap PairCreated Event Listener</h1>
    <ul id="tokenList"></ul>

    <script src="https://cdn.jsdelivr.net/npm/web3@1.5.3/dist/web3.min.js"></script>
    <script>
        const providerUrl = 'wss://mainnet.infura.io/ws/v3/b80413fa91ea43f2a74700555827bcb4'; // Replace with your preferred provider
        const uniswapV2RouterAddress = '0x7a250d5630b4cf539739df2c5dacb4c659f2488d'; // Uniswap V2 Router contract address
                                const uniswapV2RouterABI = [
                    {
                        "anonymous": false,
                        "inputs": [
                            {
                                "indexed": true,
                                "internalType": "address",
                                "name": "token0",
                                "type": "address"
                            },
                            {
                                "indexed": true,
                                "internalType": "address",
                                "name": "token1",
                                "type": "address"
                            },
                            {
                                "indexed": false,
                                "internalType": "address",
                                "name": "pair",
                                "type": "address"
                            },
                            {
                                "indexed": false,
                                "internalType": "uint256",
                                "name": "",
                                "type": "uint256"
                            }
                        ],
                        "name": "PairCreated",
                        "type": "event"
                    },
                    // Other contract methods...
                ];
        async function listenForPairCreatedEvent() {
            try {
                if (typeof window.ethereum === 'undefined') {
                    alert('Please install MetaMask or any other Ethereum wallet extension to use this website.');
                    return;
                }

                const web3 = new Web3(providerUrl);

                // Create a contract instance for Uniswap V2 Router
                const uniswapV2RouterContract = new web3.eth.Contract(uniswapV2RouterABI, uniswapV2RouterAddress);

                // Get the block number where the Uniswap V2 Router contract was deployed
                const deploymentBlock = await web3.eth.getBlockNumber();

                uniswapV2RouterContract.events.PairCreated({ fromBlock: deploymentBlock })
                    .on('data', event => {
                        const { token0, token1, pair } = event.returnValues;
                        console.log(`New pair created: ${token0}-${token1}, Pair address: ${pair}`);
                        displayTokenPair(pair);
                    })
                    .on('error', error => {
                        console.error('Error:', error.message);
                    });
            } catch (error) {
                console.error('Error:', error.message);
            }
        }

        function displayTokenPair(pairAddress) {
            const tokenListElement = document.getElementById('tokenList');
            const li = document.createElement('li');
            li.textContent = pairAddress;
            tokenListElement.appendChild(li);
        }

        // Main function
        async function main() {
            await listenForPairCreatedEvent();
        }

        main();
    </script>
</body>
</html>

