<!DOCTYPE html>
<html>
<head>
    <title>Fetch Newly Created Tokens</title>
</head>
<body>
    <h1>Newly Created Tokens (Within 1 Hour)</h1>
    <ul id="tokenList">
    </ul>

    <script src="https://cdn.ethers.io/lib/ethers-5.0.umd.min.js"></script>
    <script>
        // Replace YOUR_ETHERSCAN_API_KEY with your actual Etherscan API key
        const etherscanApiKey = 'AFFD2SXUNV3RY968V4442KMBP4928IBMJ7';
        const etherscanApiUrl = `https://api.etherscan.io/api`;

        async function fetchNewlyCreatedTokens() {
            const provider = new ethers.providers.JsonRpcProvider(); // Using default provider (localhost:8545 or Infura)

            try {
                const response = await fetch(etherscanApiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        module: 'logs',
                        action: 'getLogs',
                        apiKey: etherscanApiKey,
                        fromBlock: 'latest',
                        toBlock: 'latest',
                        address: '0x0000000000000000000000000000000000000000',
                        topic0: ethers.utils.id('ContractCreation(address)'),
                    }),
                });

                const data = await response.json();

                if (data.status === '1' && data.message === 'OK') {
                    const transactions = data.result;
                    displayTokens(transactions);
                } else {
                    console.error('Failed to fetch data:', data.message);
                }
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }

        function displayTokens(transactions) {
            const tokenList = document.getElementById('tokenList');
            tokenList.innerHTML = '';

            transactions.forEach(tx => {
                const listItem = document.createElement('li');
                const tokenLink = document.createElement('a');
                tokenLink.href = `https://etherscan.io/tx/${tx.transactionHash}`;
                tokenLink.textContent = `Transaction Hash: ${tx.transactionHash}`;
                listItem.appendChild(tokenLink);

                const timestamp = new Date(parseInt(tx.timeStamp) * 1000);
                const timeElement = document.createElement('p');
                timeElement.textContent = `Creation Date: ${timestamp}`;
                listItem.appendChild(timeElement);

                tokenList.appendChild(listItem);
            });
        }

        // Fetch transactions on page load
        window.addEventListener('load', () => {
            fetchNewlyCreatedTokens();
        });
    </script>
</body>
</html>
