<!DOCTYPE html>
<html>
<head>
  <title>Token Liquidity Created</title>
</head>
<body>
  <h1>Token Liquidity Created</h1>
  <div id="liquidityInfo"></div>

  <script>
    // Replace with your Etherscan API key and token contract address
    const etherscanApiKey = "AFFD2SXUNV3RY968V4442KMBP4928IBMJ7";
    const tokenContractAddress = "0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f"; // Replace with your token contract address

    async function getLatestBlockNumber() {
      const apiUrl = `https://api.etherscan.io/api?module=proxy&action=eth_blockNumber&apikey=${etherscanApiKey}`;

      try {
        const response = await fetch(apiUrl);
        const data = await response.json();

        if (data.status === "1" && data.message === "OK") {
          const latestBlockNumber = parseInt(data.result, 16);
          return latestBlockNumber;
        } else {
          console.error("Error fetching latest block number:", data.message);
          return null;
        }
      } catch (error) {
        console.error("Error fetching latest block number:", error);
        return null;
      }
    }

    async function getTransactionHashFromBlock(blockNumber) {
      const apiUrl = `https://api.etherscan.io/api?module=proxy&action=eth_getBlockByNumber&tag=${blockNumber}&boolean=true&apikey=${etherscanApiKey}`;

      try {
        const response = await fetch(apiUrl);
        const data = await response.json();

        if (data.status === "1" && data.message === "OK" && data.result && data.result.transactions) {
          // Get the first transaction hash from the block
          const transactionHash = data.result.transactions[0].hash;
          return transactionHash;
        } else {
          console.error("Error fetching transaction hash from block:", data.message);
          return null;
        }
      } catch (error) {
        console.error("Error fetching transaction hash from block:", error);
        return null;
      }
    }

    async function getLiquidityCreatedInfo(transactionHash) {
      const apiUrl = `https://api.etherscan.io/api?module=proxy&action=eth_getTransactionByHash&txhash=${transactionHash}&apikey=${etherscanApiKey}`;

      try {
        const response = await fetch(apiUrl);
        const data = await response.json();

        if (data.status === "1" && data.message === "OK" && data.result) {
          // Get the relevant information from the transaction data
          const token0Address = data.result.input.substr(34, 42);
          const token1Address = data.result.input.substr(76, 42);
          const liquidityCreatedInfo = `Transaction Hash: ${transactionHash}\nToken0 Address: ${token0Address}\nToken1 Address: ${token1Address}`;
          return liquidityCreatedInfo;
        } else {
          console.error("Error fetching liquidity created info:", data.message);
          return null;
        }
      } catch (error) {
        console.error("Error fetching liquidity created info:", error);
        return null;
      }
    }

    async function displayLiquidityCreatedInfo() {
      const latestBlockNumber = await getLatestBlockNumber();
      if (latestBlockNumber === null) {
        return;
      }

      const transactionHash = await getTransactionHashFromBlock(latestBlockNumber);
      if (transactionHash === null) {
        return;
      }

      const liquidityCreatedInfo = await getLiquidityCreatedInfo(transactionHash);
      if (liquidityCreatedInfo === null) {
        return;
      }

      const liquidityInfoDiv = document.getElementById("liquidityInfo");
      liquidityInfoDiv.textContent = liquidityCreatedInfo;
    }

    displayLiquidityCreatedInfo();
  </script>
</body>
</html>
