<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uniswap Liquidity Tokens - Infura</title>
</head>
<body>
    <h1>Uniswap Liquidity Tokens in the Last Few Hours - Infura</h1>
    <div id="tokenList"></div>

    <script src="https://cdn.jsdelivr.net/npm/web3@1.5.2/dist/web3.min.js"></script>
    <script>
        const infuraApiKey = 'b80413fa91ea43f2a74700555827bcb4';
const infuraEndpoint = `https://mainnet.infura.io/v3/${infuraApiKey}`;

async function getLiquidityTokens() {
  if (typeof window.ethereum === 'undefined') {
    alert('Please install MetaMask or any other Ethereum wallet extension to use this website.');
    return;
  }

  const web3 = new Web3(infuraEndpoint);

  try {
    const currentTime = Math.floor(Date.now() / 1000);
    const oneDayAgo = currentTime - 86400; // 86400 seconds in a day

    const uniswapV2RouterAddress = '0x7a250d5630b4cf539739df2c5dacb4c659f2488d'; // Uniswap V2 Router contract address
    const uniswapV2RouterABI = [/* Uniswap V2 Router ABI */];

    const uniswapV2RouterContract = new web3.eth.Contract(uniswapV2RouterABI, uniswapV2RouterAddress);
    const liquidityEvents = await uniswapV2RouterContract.getPastEvents('AddLiquidity', {
      fromBlock: oneDayAgo,
      toBlock: 'latest',
    });

    const newTokenAddresses = new Set();

    for (const event of liquidityEvents) {
      const { tokenA, tokenB } = event.returnValues;
      const liquidityToken = `${tokenA}-${tokenB}`;
      newTokenAddresses.add(liquidityToken);
    }

    displayTokenAddresses([...newTokenAddresses]);

  } catch (error) {
    console.error('Error:', error.message);
  }
}

function displayTokenAddresses(tokenAddresses) {
  const tokenListElement = document.getElementById('tokenList');
  tokenListElement.innerHTML = '';

  if (tokenAddresses.length === 0) {
    tokenListElement.innerHTML = '<p>No new tokens created in the last day.</p>';
    return;
  }

  const ul = document.createElement('ul');
  tokenAddresses.forEach((address) => {
    const li = document.createElement('li');
    li.textContent = address;
    ul.appendChild(li);
  });

  tokenListElement.appendChild(ul);
}

getLiquidityTokens();

    </script>
</body>
</html>
